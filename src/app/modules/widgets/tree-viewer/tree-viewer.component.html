<div class="tree-view" *ngIf="model" [ngClass]="cssClasses">
  <div class="tree-view-item">
    <div
      class="tree-view-item-key"
      (click)="onClick(model)"
      (dblclick)="onDoubleClick(model)"
      [style.padding-left]="level * 12 + 'px'"
      [ngClass]="{
      'active': model.active,
      'header': level == 0,
      'selected': model.selected
      }"
    >
      <div class="tree-view-element">
        <span class="icon-type fa" [ngClass]="icon" (click)="onIconClick(model, $event)">
        </span>
        <span title="{{model.hover}}" (click)="onTextClick(model, $event)" (dblclick)="onTextDoubleClick(model, $event)">{{model.name}}</span>
      </div>

      <div>
        <span *ngIf="showEmbeddedButton()"
          [title]="embeddedButton.hoverText(model)"
          class="embedded-button" [ngClass]="embeddedButtonClasses"
          (click)="onEmbeddedButtonClick()"></span>
      </div>

    </div>
    <div *ngIf="activeAction" class="confirm-action" [ngClass]="actionCssClasses">
      <span class="confirm-action-message">{{activeAction.message}}</span>
      <br/>
      <a href="#" class="confirm-action-cancel-button" [ngClass]="activeAction.cancelCssClasses" (click)="onActionCancelled()">{{activeAction.cancelButtonText}}</a>
      <a href="#" class="confirm-action-confirm-button" [ngClass]="activeAction.confirmCssClasses" (click)="onActionConfirmed()">{{activeAction.confirmButtonText}}</a>
    </div>
  </div>
  <div *ngIf="shouldShowNewElement()" [style.padding-left]="level * 12 + 'px'">
    <app-new-element (cancelled)="onNewElementCancelled()" (succeeded)="onNewElementSucceeded()" [config]="newElementConfig"></app-new-element>
  </div>
  <div *ngIf="model.expanded">
    <div *ngFor="let child of model.children">
      <app-tree-viewer [model]="child" [level]="level + 1" [config]="config"></app-tree-viewer>
    </div>
  </div>
</div>
